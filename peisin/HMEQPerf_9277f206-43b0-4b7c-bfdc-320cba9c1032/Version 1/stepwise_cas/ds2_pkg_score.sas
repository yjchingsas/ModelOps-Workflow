ds2_options sas tkgmac scond=none;
 package &SCOREPACK/overwrite=yes;
 #_local _P_;
 #_local MACLOGBIG;
 #_local _J_;
 #_local _I_;
 #_local _TEMP_;
 #_local _LINP_;
 #_local _BADVAL_;
 dcl char(12) I_DEFAULT;
 dcl double EM_EVENTPROBABILITY;
 dcl char(12) EM_CLASSIFICATION;
 dcl double EM_PROBABILITY;
 method score(double "Delinquencies", in_out char(12) "EM_CLASSIFICATION", 
in_out double "EM_EVENTPROBABILITY", in_out double "EM_PROBABILITY", in_out 
char(12) "I_Default", in_out double "P_Default0", in_out double "P_Default1");
dcl char(2) _DELINQUENCIES_;
 dcl char(12) _LEVELS_57892509_[2];
 dcl double _BETA_57892509_0_[11];
 dcl double _XROW_57892509_0_[11];
 _LEVELS_57892509_:=('1', '0');
_BETA_57892509_0_:=(10.9023671857731, -13.6000699183499, -13.0424333492693, 
-12.0810221821147, -13.3301154217211, -12.1551301542684, -10.0550693253859, 
-4.7889957347781E-9, -4.8598226695899E-9, 0, 0);
_BADVAL_ = 0.0;
_LINP_ = 0.0;
_TEMP_ = 0.0;
_I_ = 0.0;
_J_ = 0.0;
MACLOGBIG = 7.0978271289338392E+02;
_DELINQUENCIES_ = LEFT(TRIM(put(DELINQUENCIES, BEST2.)));
do _I_ = 1.0 to 11.0;
_XROW_57892509_0_[_I_] = 0.0;
end;
_XROW_57892509_0_[1.0] = 1.0;
_TEMP_ = 1.0;
select (_DELINQUENCIES_);
when ('0') _XROW_57892509_0_[2.0] = _TEMP_;
when ('1') _XROW_57892509_0_[3.0] = _TEMP_;
when ('2') _XROW_57892509_0_[4.0] = _TEMP_;
when ('3') _XROW_57892509_0_[5.0] = _TEMP_;
when ('4') _XROW_57892509_0_[6.0] = _TEMP_;
when ('5') _XROW_57892509_0_[7.0] = _TEMP_;
when ('6') _XROW_57892509_0_[8.0] = _TEMP_;
when ('7') _XROW_57892509_0_[9.0] = _TEMP_;
when ('8') _XROW_57892509_0_[10.0] = _TEMP_;
when ('10') _XROW_57892509_0_[11.0] = _TEMP_;
otherwise do ;
_BADVAL_ = 1.0;
goto SKIP_57892509_0;
end;
end;
do _I_ = 1.0 to 11.0;
_LINP_ + _XROW_57892509_0_[_I_] * _BETA_57892509_0_[_I_];
end;
SKIP_57892509_0: if (_BADVAL_ = 0.0) & ^MISSING(_LINP_) then do ;
if (_LINP_ > 0.0) then do ;
P_DEFAULT1 = 1.0 / (1.0 + EXP(-_LINP_));
end;
 else do ;
P_DEFAULT1 = EXP(_LINP_) / (1.0 + EXP(_LINP_));
end;
P_DEFAULT0 = 1.0 - P_DEFAULT1;
if P_DEFAULT1 >= 0.5 then do ;
I_DEFAULT = _LEVELS_57892509_[1.0];
end;
 else do ;
I_DEFAULT = _LEVELS_57892509_[2.0];
end;
end;
 else do ;
_LINP_ = .;
P_DEFAULT1 = .;
P_DEFAULT0 = .;
I_DEFAULT = ' ';
end;
if "P_DEFAULT1" = . then "P_DEFAULT1" = 0.0789224953;
if "P_DEFAULT0" = . then "P_DEFAULT0" = 0.9210775047;
if MISSING("I_DEFAULT") then do ;
_P_ = 0.0;
if "P_DEFAULT1" > _P_ then do ;
_P_ = "P_DEFAULT1";
"I_DEFAULT" = '           1';
end;
if "P_DEFAULT0" > _P_ then do ;
_P_ = "P_DEFAULT0";
"I_DEFAULT" = '           0';
end;
end;
EM_EVENTPROBABILITY = "P_DEFAULT1";
EM_CLASSIFICATION = "I_DEFAULT";
EM_PROBABILITY = MAX("P_DEFAULT1", "P_DEFAULT0");
_return: ;
end;
 endpackage;
